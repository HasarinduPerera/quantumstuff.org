<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Theme Persistence -->
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
        })();
    </script>

	<title>Quantum Circuit Playground - quantumstuff.org</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="description" content="Interactive quantum circuit playground - Build and simulate quantum circuits with drag-and-drop gates">
	<meta name="keywords" content="quantum circuit, quantum computing, quantum gates, interactive simulator, Hadamard, CNOT, Pauli">

	<!-- Fonts -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Crimson+Pro:wght@400;600&display=swap" rel="stylesheet">

	<!-- Q.js Library CSS -->
	<link rel="stylesheet" href="../libraries/q.js/Q/Q.css">
	<link rel="stylesheet" href="../libraries/q.js/Q/Q-Circuit-Editor.css">

	<!-- Lucide Icons -->
	<script src="https://unpkg.com/lucide@latest"></script>
	<style>
		/* Reset */
		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		/* Q.js elements need content-box */
		.Q-circuit,
		.Q-circuit *,
		.Q-circuit-palette,
		.Q-circuit-palette * {
			box-sizing: content-box !important;
		}

		/* Keep border-box for Q.js wires */
		.Q-circuit-register-wire,
		.Q-circuit-register-wire * {
			box-sizing: border-box !important;
		}

		:root,
		[data-theme="light"] {
			--bg-primary: #faf8f3;
			--bg-card: #fffdfb;
			--text-primary: #2b281f;
			--text-secondary: #6b5e4f;
			--border-subtle: rgba(212, 197, 169, 0.3);
			--color-green: #16a34a;
		}

		[data-theme="dark"] {
			--bg-primary: #1c1a16;
			--bg-card: #32291d;
			--text-primary: #f5f1e8;
			--text-secondary: #c9b898;
			--border-subtle: rgba(212, 197, 169, 0.15);
			--color-green: #16a34a;
		}

		.nav-bar {
			background: var(--bg-card);
			border-bottom: 1px solid var(--border-subtle);
			padding: 0.5rem 1rem;
			display: flex;
			align-items: center;
			gap: 1rem;
			position: sticky;
			top: 0;
			z-index: 1000;
		}

		.nav-bar a {
			color: var(--text-secondary);
			text-decoration: none;
			display: flex;
			align-items: center;
			gap: 0.3rem;
			font-size: 0.9rem;
			transition: color 0.2s;
		}

		.nav-bar a:hover {
			color: var(--color-green);
		}

		.nav-separator {
			color: var(--text-secondary);
			opacity: 0.3;
		}

		/* Base Styles */
		body {
			font-family: 'Inter', sans-serif;
			background: var(--bg-primary);
			color: var(--text-primary);
			line-height: 1.7;
			min-height: 100vh;
		}

		/* Page Layout */
		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 2rem;
		}

		.page-header {
			text-align: center;
			margin-bottom: 3rem;
			padding-bottom: 2rem;
			border-bottom: 1px solid var(--border-subtle);
		}

		.page-header h1 {
			font-family: 'Crimson Pro', serif;
			font-size: 2.5rem;
			font-weight: 600;
			color: var(--text-primary);
			margin-bottom: 0.75rem;
			line-height: 1.2;
		}

		.page-header p {
			font-size: 1.125rem;
			color: var(--text-secondary);
			max-width: 700px;
			margin: 0 auto;
		}

		/* Info Cards */
		.info-grid {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			gap: 1.5rem;
			margin-bottom: 3rem;
		}

		.info-card {
			background: var(--bg-card);
			border: 1px solid var(--border-subtle);
			border-radius: 12px;
			padding: 1.5rem;
			transition: all 0.2s;
		}

		.info-card:hover {
			border-color: var(--color-green);
			transform: translateY(-2px);
			box-shadow: 0 4px 12px rgba(22, 163, 74, 0.1);
		}

		.info-card h3 {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			font-size: 1.125rem;
			font-weight: 600;
			color: var(--text-primary);
			margin-bottom: 0.5rem;
		}

		.info-card p {
			color: var(--text-secondary);
			font-size: 0.95rem;
			line-height: 1.5;
		}

		/* Section */
		.section {
			margin-bottom: 3rem;
		}

		.section-title {
			font-family: 'Crimson Pro', serif;
			display: flex;
			align-items: center;
			gap: 0.75rem;
			font-size: 1.75rem;
			font-weight: 600;
			color: var(--text-primary);
			margin-bottom: 1.5rem;
		}

		.section-intro {
			color: var(--text-secondary);
			font-size: 1rem;
			margin-bottom: 2rem;
			line-height: 1.6;
		}

		.playground-section {
			background: var(--bg-card);
			border: 1px solid var(--border-subtle);
			border-radius: 12px;
			padding: 2rem;
		}

		/* Q.js Circuit Styling (from lesson 4) */
		.qjs-circuit {
			background: #fff;
			border-radius: 8px;
			padding: 1rem;
			margin: 1rem auto;
			width: fit-content;
			max-width: 100%;
		}

		/* Hide the JavaScript console reference text */
		.Q-circuit > p {
			display: none !important;
		}

		/* Ensure proper z-index stacking for wires to be visible */
		.Q-circuit-board-background {
			z-index: 0;
		}

		.Q-circuit-board-foreground {
			z-index: 1;
		}

		/* Fix stacking effect visibility */
		.Q-circuit-palette {
			position: relative;
			isolation: isolate;
		}

		/* Remove scrollbars and center circuit */
		.Q-circuit-board-container {
			overflow: visible !important;
			max-height: none !important;
			display: flex !important;
			justify-content: center !important;
		}

		/* Style results output */
		#example-report {
			font-family: 'Courier New', monospace;
			font-size: 0.9rem;
			line-height: 1.6;
			margin: 0;
		}

		/* Footer Navigation */
		.nav-footer {
			display: flex;
			justify-content: space-between;
			align-items: center;
			gap: 1rem;
			padding: 2rem 0;
			margin-top: 3rem;
			border-top: 1px solid var(--border-subtle);
		}

		.nav-btn {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			padding: 0.75rem 1.5rem;
			background: var(--bg-card);
			border: 1px solid var(--border-subtle);
			border-radius: 8px;
			color: var(--text-primary);
			text-decoration: none;
			font-weight: 500;
			transition: all 0.2s;
		}

		.nav-btn:hover {
			background: var(--color-green);
			color: white;
			border-color: var(--color-green);
			transform: translateY(-2px);
		}

		.nav-btn-prev {
			margin-right: auto;
		}

		.nav-btn-next {
			margin-left: auto;
		}

		/* Footer */
		footer {
			border-top: 1px solid var(--border-subtle);
			padding: 2rem 0;
			margin-top: 2rem;
		}

		.footer-content {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 2rem;
			text-align: center;
			color: var(--text-secondary);
			font-size: 0.875rem;
		}

		.footer-content a {
			color: var(--color-green);
			text-decoration: none;
		}

		.footer-content a:hover {
			text-decoration: underline;
		}

		/* Responsive */
		@media (max-width: 768px) {
			.page-header h1 {
				font-size: 2rem;
			}

			.container {
				padding: 1.5rem;
			}

			.playground-section {
				padding: 1.5rem;
			}

			.qjs-circuit {
				padding: 0.75rem;
			}

			.nav-footer {
				flex-direction: column;
			}

			.nav-btn-prev,
			.nav-btn-next {
				margin: 0;
				width: 100%;
				justify-content: center;
			}

			.info-grid {
				grid-template-columns: 1fr;
			}
		}
	</style>

	<!-- Q.js Scripts -->
	<script src="../libraries/q.js/Q/Q.js"></script>
	<script src="../libraries/q.js/Q/Q-ComplexNumber.js"></script>
	<script src="../libraries/q.js/Q/Q-Matrix.js"></script>
	<script src="../libraries/q.js/Q/Q-Qubit.js"></script>
	<script src="../libraries/q.js/Q/Q-Gate.js"></script>
	<script src="../libraries/q.js/Q/Q-History.js"></script>
	<script src="../libraries/q.js/Q/Q-Circuit.js"></script>
	<script src="../libraries/q.js/Q/Q-Circuit-Editor.js"></script>

</head>

<body>
	<!-- Navigation -->
	<div class="nav-bar">
		<a href="../index.html">
			<i data-lucide="home" style="width:16px;height:16px;"></i>
			Home
		</a>
		<span class="nav-separator">/</span>
		<a href="../playground.html">
			<i data-lucide="arrow-left" style="width:16px;height:16px;"></i>
			Playground
		</a>
		<span class="nav-separator">/</span>
		<span style="color: var(--text-primary); font-weight: 500; font-size: 0.9rem;">Quantum Circuit Builder</span>
	</div>

	<main class="container">
		<!-- Page Header -->
		<div class="page-header">
			<h1>Quantum Circuit Builder</h1>
			<p>Build and simulate quantum circuits with drag-and-drop gates. Explore superposition, entanglement, and quantum algorithms in real-time.</p>
		</div>

		<!-- Info Cards -->
		<div class="info-grid">
			<div class="info-card">
				<h3>
					<i data-lucide="zap" style="width:18px;height:18px;color:var(--color-green)"></i>
					Drag & Drop
				</h3>
				<p>Drag quantum gates from the palette onto the circuit to build your algorithms</p>
			</div>
			<div class="info-card">
				<h3>
					<i data-lucide="activity" style="width:18px;height:18px;color:var(--color-green)"></i>
					Live Simulation
				</h3>
				<p>Watch probability results update in real-time as you modify your circuit</p>
			</div>
			<div class="info-card">
				<h3>
					<i data-lucide="cpu" style="width:18px;height:18px;color:var(--color-green)"></i>
					Quantum Gates
				</h3>
				<p>Experiment with Hadamard, Pauli, CNOT, and other essential quantum gates</p>
			</div>
		</div>

		<!-- Circuit Playground -->
		<section class="section">
			<h2 class="section-title">
				<i data-lucide="circuit-board" style="width:24px;height:24px;color:var(--color-green)"></i>
				Interactive Circuit Editor
			</h2>

			<div class="playground-section">
				<p class="section-intro">
					Drag gates from the palette below onto the circuit. Tap and drag tiles to rearrange. Watch the probability results update automatically.
				</p>

				<div class="qjs-circuit">
					<div class="Q-circuit-palette"></div>
					<div id="example"></div>

					<h4 style="margin-top: 2rem; margin-bottom: 0.5rem; color: var(--text-primary);">Live Probability Results</h4>
					<p style="color: var(--text-secondary); margin-bottom: 1rem;">
						Edit the circuit above and watch the probability results update in real-time.
					</p>
					<pre style="background: var(--bg-card); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-subtle);"><samp id="example-report" for="example"></samp></pre>
				</div>
			</div>
		</section>

		<!-- Navigation -->
		<nav class="nav-footer">
			<a href="../tutorials/basics/lessons/lesson4.html" class="nav-btn nav-btn-prev">
				<i data-lucide="arrow-left" style="width:16px;height:16px;"></i>
				Back to Lessons
			</a>
			<a href="../index.html" class="nav-btn nav-btn-next">
				Home
				<i data-lucide="arrow-right" style="width:16px;height:16px;"></i>
			</a>
		</nav>
	</main>

	<!-- Footer -->
	<footer>
		<div class="footer-content">
			<p>
				Built with <a href="https://quantumjavascript.app/" target="_blank">Q.js</a> - Quantum Circuit Simulator<br>
				Part of <a href="../index.html">quantumstuff.org</a> learning platform
			</p>
		</div>
	</footer>

	<script>
		// Create gate palette (from lesson 4 playground)
		Array
			.from(document.querySelectorAll('.Q-circuit-palette'))
			.forEach(function (el) {
				Q.Circuit.Editor.createPalette(el)
			})

		// Initialize circuit on page load (3 qubits, 7 moments)
		window.addEventListener('DOMContentLoaded', function () {
			const circuit = new Q.Circuit(3, 7)
			circuit.name = 'example'
			const domEl = document.getElementById('example')
			if (domEl) {
				circuit.sort$()
				circuit.toDom(domEl)
				circuit.evaluate$()
			}
		})

		// Update circuit parts helper function
		function updateCircuitParts(circuit) {
			const reportEl = document.getElementById(circuit.name + '-report')
			if (reportEl) reportEl.innerText = circuit.report$()
		}

		// Update when circuit is modified via GUI
		function updatePlaygroundFromDom(circuit) {
			circuit.evaluate$()
		}

		// Event listener: evaluation completed
		window.addEventListener('Q.Circuit.evaluate completed', function (event) {
			const circuit = event.detail.circuit
			updateCircuitParts(circuit)
		})

		// Event listener: GUI altered circuit
		window.addEventListener('Q gui altered circuit', function (event) {
			updatePlaygroundFromDom(event.detail.circuit)
		})
	</script>
	<script>
		lucide.createIcons();
	</script>
</body>

</html>